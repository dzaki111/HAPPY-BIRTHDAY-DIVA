<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Happy 18th Birthday Diva!</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;1,700&family=Prata&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/0.155.0/three.min.js"></script>

    <style>
        :root { --bg: #0a0a0a; --text: #ffffff; --accent: #ff4d6d; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Prata', serif; overflow-x: hidden; touch-action: pan-y; }

        /* --- 1. INTRO OVERLAY --- */
        #intro-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10000; background: #000; cursor: pointer;
            display: flex; justify-content: center; align-items: center;
        }
        #canvas-fireworks { position: absolute; width: 100%; height: 100%; }
        #tap-msg { position: relative; z-index: 10001; letter-spacing: 5px; font-size: 0.8rem; animation: blink 2s infinite; text-align: center; }
        @keyframes blink { 0%, 100% { opacity: 0.2; } 50% { opacity: 0.8; } }

        #player { display: none; }

        /* --- 2. HERO SECTION --- */
        .hero {
            height: 100vh; width: 100%; position: relative;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5), rgba(0,0,0,0.8)), 
                        url('asset/fotoawal.png') no-repeat center center/cover;
            display: flex; flex-direction: column; justify-content: space-between; padding: 60px 30px;
            opacity: 0; transition: opacity 1.5s ease;
        }
        .hero h1 { font-size: clamp(2.5rem, 10vw, 8rem); line-height: 0.8; text-transform: uppercase; opacity: 0; transform: translateY(30px); }
        .hero-footer { display: flex; justify-content: space-between; align-items: flex-end; opacity: 0; transform: translateY(30px); }
        .age { font-size: clamp(4rem, 15vw, 12rem); font-family: 'Playfair Display', serif; font-style: italic; line-height: 0.7; }

        /* --- 3. SLIDE 2 (GRID FOTO) --- */
        .scroll-wrapper { position: relative; height: 100vh; width: 100vw; background: #000; overflow: hidden; }
        .grid-container { display: flex; flex-direction: column; justify-content: center; gap: 15px; width: 100%; height: 150%; position: absolute; top: -25%; left: 0; transform: rotate(-8deg); }
        .row { display: flex; width: max-content; height: 35vh; gap: 15px; }
        .row img { height: 100%; width: auto; aspect-ratio: 3/4; object-fit: cover; border-radius: 10px; opacity: 0.35; }
        .row-left { animation: scrollLeft 45s linear infinite; }
        .row-right { animation: scrollRight 45s linear infinite; }
        @keyframes scrollLeft { from { transform: translateX(0); } to { transform: translateX(-50%); } }
        @keyframes scrollRight { from { transform: translateX(-50%); } to { transform: translateX(0); } }

        .floating-text-slide2 { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index: 100; padding: 20px; }
        .floating-text-slide2 h2 { opacity: 0; transform: translateY(40px); font-size: clamp(1.8rem, 6vw, 4.5rem); text-align: center; line-height: 1.2; }

        /* --- 4. MESSAGE SECTION --- */
        .message-section { min-height: 100vh; width: 100%; padding: 80px 8%; display: flex; flex-direction: column; gap: 40px; align-items: center; background: #000; }
        .text-content { opacity: 0; transform: translateY(30px); text-align: center; max-width: 600px; }
        .text-content h2 { font-family: 'Playfair Display', serif; font-size: clamp(2rem, 5vw, 3.5rem); color: var(--accent); margin-bottom: 20px; }
        .text-content p { font-size: 1.1rem; line-height: 1.8; color: #ddd; }
        .collage-content { display: flex; flex-direction: column; gap: 20px; width: 100%; max-width: 500px; opacity: 0; transform: translateY(30px); }
        .collage-content video { width: 100%; height: auto; aspect-ratio: 16/9; object-fit: cover; border-radius: 12px; background: #111; border: 1px solid #333; }

        @media (min-width: 992px) {
            .message-section { flex-direction: row; justify-content: space-between; text-align: left; }
            .collage-content { display: grid; grid-template-columns: 1fr 1fr; max-width: 800px; }
        }

        /* --- 5. CAKE SECTION --- */
        .cake-section { height: 100vh; width: 100%; background: #000; position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; }
        #canvas-cake { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        .hbd-text { position: absolute; top: 15%; color: var(--accent); font-size: clamp(1.5rem, 6vw, 3.5rem); font-family: 'Playfair Display', serif; opacity: 0; transform: scale(0.8); transition: 1.2s; text-align: center; width: 100%; z-index: 20; }
        .hbd-text.show { opacity: 1; transform: scale(1); }
        .instruction { color: var(--accent); letter-spacing: 2px; text-align: center; margin-bottom: 100px; z-index: 10; font-size: 0.9rem; }
        .cake { position: relative; width: 200px; height: 110px; background: #f4e1d2; border-radius: 10px 10px 0 0; display: flex; justify-content: space-evenly; align-items: flex-start; z-index: 10; }
        .candle { position: relative; width: 8px; height: 40px; background: #ff4d6d; top: -40px; border-radius: 4px; }
        .flame { position: absolute; width: 12px; height: 20px; background: orange; top: -20px; left: -2px; border-radius: 50% 50% 20% 20%; box-shadow: 0 0 15px orange; animation: flicker 0.1s infinite alternate; }
        .flame.off { opacity: 0; transform: scale(0); }
        @keyframes flicker { from { transform: scale(1); } to { transform: scale(1.1); } }
        .wish-final { margin-top: 50px; opacity: 0; text-align: center; transition: 1s; z-index: 10; }
        .wish-final.show { opacity: 1; }

        /* --- 6. PLANET SECTION --- */
        .planet-section { height: 100vh; width: 100%; background: radial-gradient(circle at center, #000010 0%, #000000 100%); position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; touch-action: none; }
        #planet-canvas-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 11; }
        
        /* Tombol Lanjut Scroll */
        .btn-next-scroll {
            position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
            z-index: 100; padding: 12px 25px; background: rgba(255, 77, 109, 0.2);
            color: white; border: 1px solid var(--accent); border-radius: 30px;
            font-size: 0.8rem; letter-spacing: 1px; backdrop-filter: blur(5px);
            cursor: pointer; animation: bounce 2s infinite;
        }
        @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateX(-50%) translateY(0);} 40% {transform: translateX(-50%) translateY(-10px);} 60% {transform: translateX(-50%) translateY(-5px);} }

        /* --- 7. VIDEO SECTION --- */
        .video-section { min-height: 100vh; width: 100%; background: #000; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 60px 20px; }
        .video-container { width: 100%; max-width: 400px; aspect-ratio: 9/16; background: #111; border-radius: 20px; overflow: hidden; border: 2px solid var(--accent); }
        .wa-btn { margin-top: 40px; color: white; text-decoration: none; border: 1px solid var(--accent); padding: 15px 40px; border-radius: 50px; font-size: 0.9rem; letter-spacing: 2px; }
        footer { padding: 40px; text-align: center; color: #444; font-size: 0.7rem; }
    </style>
</head>
<body>

    <div id="intro-overlay" onclick="startExperience()">
        <canvas id="canvas-fireworks"></canvas>
        <div id="tap-msg">PENCET LAYAR SAYANG</div>
    </div>

    <div id="player"></div>

    <section class="hero" id="hero-content">
        <h1>HAPPY<br>BIRTHDAY</h1>
        <div class="hero-footer">
            <div>FEBRUARI 12, 2026</div>
            <div class="age">18th</div>
        </div>
    </section>

    <section class="scroll-wrapper">
        <div class="grid-container">
            <div class="row row-left">
                <img src="asset/foto1.png"><img src="asset/foto2.png"><img src="asset/foto3.png"><img src="asset/foto4.png"><img src="asset/foto5.png"><img src="asset/foto6.png"><img src="asset/foto7.png"><img src="asset/foto8.png">
                <img src="asset/foto1.png"><img src="asset/foto2.png"><img src="asset/foto3.png"><img src="asset/foto4.png"><img src="asset/foto5.png"><img src="asset/foto6.png"><img src="asset/foto7.png"><img src="asset/foto8.png">
            </div>
            <div class="row row-right">
                <img src="asset/foto7.png"><img src="asset/foto8.png"><img src="asset/foto6.png"><img src="asset/foto5.png"><img src="asset/foto4.png"><img src="asset/foto3.png"><img src="asset/foto2.png"><img src="asset/foto1.png">
                <img src="asset/foto7.png"><img src="asset/foto8.png"><img src="asset/foto6.png"><img src="asset/foto5.png"><img src="asset/foto4.png"><img src="asset/foto3.png"><img src="asset/foto2.png"><img src="asset/foto1.png">
            </div>
            <div class="row row-left">
                <img src="asset/foto1.png"><img src="asset/foto2.png"><img src="asset/foto3.png"><img src="asset/foto4.png"><img src="asset/foto5.png"><img src="asset/foto6.png"><img src="asset/foto7.png"><img src="asset/foto8.png">
                <img src="asset/foto1.png"><img src="asset/foto2.png"><img src="asset/foto3.png"><img src="asset/foto4.png"><img src="asset/foto5.png"><img src="asset/foto6.png"><img src="asset/foto7.png"><img src="asset/foto8.png">
            </div>
        </div>
        <div class="floating-text-slide2">
            <h2 class="anim-scroll">You're my brightest star<br>in the <span>Universe</span></h2>
        </div>
    </section>

    <section class="message-section">
        <div class="text-content">
            <h2>Ciee Namabah 1 Tahun</h2>
            <p>Happy birthday buat bocil diva kesayangan aku. Sekarang udah makin gede sama makin tua yee walaupun masih 18 tahun. tapi tetep aja di mataku kamu itu bocil yang paling gemesin tapi kandang ngeselin awokawkawok. Makasih ya udah sabar sama aku dan udah nemenin hari-hari aku jadi lebih warna-warni. Jangan pernah berhenti jadi Diva yang ceria ya, saam Jangan sedih mulu. Love you, Cill</p>
        </div>
        <div class="collage-content">
            <video autoplay muted loop playsinline><source src="asset/video1.mp4" type="video/mp4"></video>
            <video autoplay muted loop playsinline><source src="asset/video2.mp4" type="video/mp4"></video>
            <video autoplay muted loop playsinline><source src="asset/video3.mp4" type="video/mp4"></video>
            <video autoplay muted loop playsinline><source src="asset/video4.mp4" type="video/mp4"></video>
        </div>
    </section>

    <section class="cake-section">
        <canvas id="canvas-cake"></canvas>
        <div class="hbd-text" id="hbd-surprise">HAPPY BIRTHDAY SAYANG <span style="display:block; font-size:1.3em; color:#fff;">DIVA</span></div>
        <div class="instruction" id="instruksi">TIUP LILINNYA SAYANG üïØÔ∏è</div>
        <div class="cake" id="cake-area">
            <div class="candle"><div class="flame"></div></div>
            <div class="candle"><div class="flame"></div></div>
            <div class="candle"><div class="flame"></div></div>
            <div class="candle"><div class="flame"></div></div>
        </div>
        <div class="wish-final" id="wish"><h2 style="color:var(--accent);">WISH GRANTED</h2><p>Scroll ya Diva SAYANG</p></div>
    </section>

    <section class="planet-section" id="planet-gui">
        <div id="planet-canvas-container"></div>
        <button class="btn-next-scroll" onclick="scrollToVideo()">LANJUT SCROLL ‚Üì</button>
    </section>

    <section class="video-section" id="final-video">
        <h2 style="margin-bottom:25px; color:var(--accent);">Di Tonton Ya Vidio BOCILL</h2>
        <div class="video-container"><video controls playsinline><source src="asset/video1.mp4" type="video/mp4"></video></div>
        <a href="https://wa.me/628123456789" class="wa-btn">CHAT AKU SEKARANG</a>
    </section>

    <footer>MADE WITH LOVE &bull; 2026 BY MIKO</footer>

    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        gsap.registerPlugin(ScrollTrigger);
        let player, cakeSurpriseStarted = false;

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', { height: '0', width: '0', videoId: 'd4OMqGKBl6E', 
                playerVars: { autoplay: 0, start: 227, end: 261, loop: 1, playlist: 'd4OMqGKBl6E' } 
            });
        }

        function scrollToVideo() {
            document.getElementById('final-video').scrollIntoView({ behavior: 'smooth' });
        }

        function startExperience() {
            if (player && player.playVideo) player.playVideo();
            document.getElementById('intro-overlay').style.display = 'none';
            document.getElementById('hero-content').style.opacity = '1';
            gsap.to(".hero h1, .hero-footer", { opacity: 1, y: 0, duration: 1, stagger: 0.3 });
            init3DPlanet();
            initMic();
            
            gsap.to(".anim-scroll", { scrollTrigger: { trigger: ".scroll-wrapper", start: "top 50%" }, opacity: 1, y: 0 });
            gsap.to(".text-content, .collage-content", { scrollTrigger: { trigger: ".message-section", start: "top 70%" }, opacity: 1, y: 0 });
        }

        function init3DPlanet() {
            const container = document.getElementById('planet-canvas-container');
            const scene = new THREE.Scene();
            const isMobile = window.innerWidth < 768;
            const camera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(container.offsetWidth, container.offsetHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            container.appendChild(renderer.domElement);

            const mainGroup = new THREE.Group(); scene.add(mainGroup);
            const textureLoader = new THREE.TextureLoader();

            // Planet
            const planetGeo = new THREE.SphereGeometry(isMobile ? 1.8 : 2.2, 32, 32);
            const planetMat = new THREE.MeshBasicMaterial({ map: textureLoader.load('asset/fotoawal.png') });
            const planet = new THREE.Mesh(planetGeo, planetMat);
            mainGroup.add(planet);

            // Ring Texts (3 Sentences)
            const ringTexts = ['HAPPY BIRTHDAY DIVA SAYANG ', 'YOU ARE MY ENTIRE UNIVERSE ', 'LOVE YOU TO THE MOON AND BACK '];
            const textGroup = new THREE.Group();
            ringTexts.forEach((text, i) => {
                const canvas = document.createElement('canvas'); canvas.width = 1024; canvas.height = 64;
                const ctx = canvas.getContext('2d');
                ctx.font = 'bold 38px Orbitron'; ctx.fillStyle = '#ffffff'; ctx.textAlign = 'center';
                ctx.fillText(text.repeat(2), 512, 45);
                const tex = new THREE.CanvasTexture(canvas); tex.wrapS = THREE.RepeatWrapping;
                const txtRing = new THREE.Mesh(new THREE.CylinderGeometry(planet.geometry.parameters.radius + 1.2 + i*0.8, planet.geometry.parameters.radius + 1.2 + i*0.8, 0.3, 32, 1, true), new THREE.MeshBasicMaterial({ map: tex, transparent: true, side: THREE.DoubleSide }));
                txtRing.rotation.x = Math.random() * Math.PI; txtRing.rotation.z = Math.random() * Math.PI;
                textGroup.add(txtRing);
            });
            mainGroup.add(textGroup);

            // Photos (40 total)
            const photoGroup = new THREE.Group();
            const assets = ['asset/foto1.png','asset/foto2.png','asset/foto3.png','asset/foto4.png','asset/foto5.png','asset/foto6.png','asset/foto7.png','asset/foto8.png'];
            for(let i=0; i<40; i++){
                const angle = Math.random() * Math.PI * 2;
                const phi = Math.acos(2 * Math.random() - 1);
                const r = (isMobile ? 6 : 8) + Math.random() * 3;
                const p = new THREE.Mesh(new THREE.PlaneGeometry(0.7, 0.9), new THREE.MeshBasicMaterial({ map: textureLoader.load(assets[i%8]), side: THREE.DoubleSide, transparent: true, opacity: 0.9 }));
                p.position.set(r*Math.sin(phi)*Math.cos(angle), r*Math.sin(phi)*Math.sin(angle), r*Math.cos(phi));
                p.lookAt(0,0,0); photoGroup.add(p);
            }
            mainGroup.add(photoGroup);

            camera.position.z = isMobile ? 22 : 16;
            let targetZoom = camera.position.z;
            let isDragging = false, prevX = 0, prevY = 0, initialDist = 0;

            // --- MOBILE CONTROLS (TOUCH & PINCH) ---
            container.addEventListener('touchstart', (e) => {
                if(e.touches.length === 2) {
                    initialDist = Math.hypot(e.touches[0].pageX - e.touches[1].pageX, e.touches[0].pageY - e.touches[1].pageY);
                } else {
                    isDragging = true; prevX = e.touches[0].pageX; prevY = e.touches[0].pageY;
                }
            }, {passive: false});

            container.addEventListener('touchmove', (e) => {
                if(e.touches.length === 2) {
                    const dist = Math.hypot(e.touches[0].pageX - e.touches[1].pageX, e.touches[0].pageY - e.touches[1].pageY);
                    const zoomChange = (initialDist - dist) * 0.05;
                    targetZoom = Math.max(8, Math.min(60, targetZoom + zoomChange));
                    initialDist = dist;
                } else if(isDragging) {
                    mainGroup.rotation.y += (e.touches[0].pageX - prevX) * 0.007;
                    mainGroup.rotation.x += (e.touches[0].pageY - prevY) * 0.007;
                    prevX = e.touches[0].pageX; prevY = e.touches[0].pageY;
                }
            }, {passive: false});

            window.addEventListener('touchend', () => isDragging = false);

            function animate() {
                requestAnimationFrame(animate);
                camera.position.z += (targetZoom - camera.position.z) * 0.1;
                if(!isDragging) {
                    planet.rotation.y += 0.002;
                    textGroup.rotation.y -= 0.003;
                    photoGroup.rotation.y += 0.001;
                }
                renderer.render(scene, camera);
            }
            animate();
        }

        function initMic() {
            navigator.mediaDevices.getUserMedia({ audio: true }).then(s => {
                const ctx = new AudioContext(), analyser = ctx.createAnalyser(), src = ctx.createMediaStreamSource(s), proc = ctx.createScriptProcessor(256,1,1);
                src.connect(analyser); analyser.connect(proc); proc.connect(ctx.destination);
                proc.onaudioprocess = () => {
                    const data = new Uint8Array(analyser.frequencyBinCount); analyser.getByteFrequencyData(data);
                    if((data.reduce((a,b)=>a+b)/data.length) > 55) matikanLilin();
                };
            }).catch(() => document.getElementById('cake-area').onclick = matikanLilin);
        }

        function matikanLilin() {
            document.querySelectorAll('.flame').forEach(f => f.classList.add('off'));
            document.getElementById('wish').classList.add('show');
            document.getElementById('hbd-surprise').classList.add('show');
            document.getElementById('instruksi').style.display = 'none';
            cakeSurpriseStarted = true;
        }

        const cCake = document.getElementById('canvas-cake'), ctxC = cCake.getContext('2d');
        cCake.width = window.innerWidth; cCake.height = window.innerHeight;
        let pC = [];
        function animateCake() {
            ctxC.clearRect(0,0,cCake.width,cCake.height);
            if(cakeSurpriseStarted && Math.random() < 0.05) {
                for(let i=0; i<15; i++) pC.push({x:Math.random()*cCake.width, y:Math.random()*cCake.height*0.6, vx:(Math.random()-0.5)*5, vy:(Math.random()-0.5)*5, a:1});
            }
            pC.forEach((p,i) => {
                p.x += p.vx; p.y += p.vy; p.a -= 0.02;
                ctxC.globalAlpha = p.a; ctxC.fillStyle = '#ff4d6d';
                ctxC.beginPath(); ctxC.arc(p.x, p.y, 2, 0, Math.PI*2); ctxC.fill();
                if(p.a <= 0) pC.splice(i,1);
            });
            requestAnimationFrame(animateCake);
        }
        animateCake();
    </script>
</body>
</html>
