<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy 18th Birthday!</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;1,700&family=Prata&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root { --bg: #0a0a0a; --text: #ffffff; --accent: #ff4d6d; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: var(--bg); color: var(--text); font-family: 'Prata', serif; overflow-x: hidden; }

        /* --- 1. INTRO OVERLAY --- */
        #intro-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10000; background: #000; cursor: pointer;
            display: flex; justify-content: center; align-items: center;
        }
        #canvas-fireworks { position: absolute; width: 100%; height: 100%; }
        #tap-msg { position: relative; z-index: 10001; letter-spacing: 5px; font-size: 0.8rem; animation: blink 2s infinite; text-align: center; }
        @keyframes blink { 0%, 100% { opacity: 0.2; } 50% { opacity: 0.8; } }

        /* --- 2. HERO SECTION --- */
        .hero {
            height: 100vh; width: 100%; position: relative;
            background: linear-gradient(to bottom, rgba(0,0,0,0.5), rgba(0,0,0,0.8)), 
                        url('asset/foto1.png') no-repeat center center/cover;
            display: flex; flex-direction: column; justify-content: space-between; padding: 60px;
            opacity: 0; transition: opacity 1.5s ease;
        }
        .hero h1 { font-size: clamp(2.5rem, 10vw, 8rem); line-height: 0.8; text-transform: uppercase; opacity: 0; transform: translateY(30px); }
        .hero-footer { display: flex; justify-content: space-between; align-items: flex-end; opacity: 0; transform: translateY(30px); }
        .age { font-size: clamp(4rem, 15vw, 12rem); font-family: 'Playfair Display', serif; font-style: italic; line-height: 0.7; }

        /* --- 3. SLIDE 2: SEAMLESS FULL SCREEN GRID --- */
        .scroll-wrapper { 
            position: relative; height: 100vh; width: 100vw; 
            background: #000; overflow: hidden; 
        }
        .grid-container { 
            display: flex; flex-direction: column; justify-content: center;
            gap: 15px; width: 100%; height: 150%; 
            position: absolute; top: -25%; left: 0; transform: rotate(-8deg); 
        }
        .row { display: flex; width: max-content; height: 35vh; gap: 15px; }
        .row img { height: 100%; width: auto; aspect-ratio: 3/4; object-fit: cover; border-radius: 10px; opacity: 0.35; }
        
        .row-left { animation: scrollLeft 45s linear infinite; }
        .row-right { animation: scrollRight 45s linear infinite; }
        @keyframes scrollLeft { from { transform: translateX(0); } to { transform: translateX(-50%); } }
        @keyframes scrollRight { from { transform: translateX(-50%); } to { transform: translateX(0); } }

        .floating-text-slide2 { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            z-index: 100; pointer-events: none; 
        }
        .floating-text-slide2 h2 { 
            opacity: 0; transform: translateY(40px); font-family: 'Playfair Display', serif; 
            font-size: clamp(1.8rem, 6vw, 4.5rem); text-align: center; text-shadow: 0 0 40px #000; 
        }

        /* --- 4. SLIDE 3: MESSAGE GRID --- */
        .message-section {
            min-height: 100vh; width: 100%; padding: 80px 8%;
            display: grid; grid-template-columns: 1.2fr 1fr; gap: 40px;
            align-items: center; background: #000;
        }
        .text-content { opacity: 0; transform: translateX(-50px); }
        .text-content h2 { font-family: 'Playfair Display', serif; font-size: clamp(2rem, 4vw, 3.5rem); color: var(--accent); margin-bottom: 20px; }
        .text-content p { color: #ddd; line-height: 1.8; margin-bottom: 15px; }
        .collage-content { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; opacity: 0; transform: translateX(50px); }
        .collage-content img { width: 100%; height: 200px; object-fit: cover; border-radius: 8px; }
        @media (max-width: 900px) { .message-section { grid-template-columns: 1fr; text-align: center; } .collage-content { order: -1; } }

        /* --- 5. SLIDE 4: INTERACTIVE CAKE (REVISI JARAK) --- */
        .cake-section {
            height: 100vh; width: 100%; background: #000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .instruction { 
            color: var(--accent); 
            letter-spacing: 2px; 
            text-align: center; 
            margin-bottom: 150px; /* JARAK DIPERJAUH */
        }
        .cake { 
            position: relative; 
            width: 220px; 
            height: 130px; 
            background: #f4e1d2; 
            border-radius: 10px 10px 0 0; 
            display: flex;
            justify-content: space-evenly;
            align-items: flex-start;
        }
        .candle { 
            position: relative; 
            width: 10px; 
            height: 45px; 
            background: #ff4d6d; 
            top: -45px; 
            border-radius: 4px; 
        }
        .flame {
            position: absolute; width: 14px; height: 22px; background: orange; top: -22px; left: -2px;
            border-radius: 50% 50% 20% 20%; box-shadow: 0 0 15px orange;
            animation: flicker 0.1s infinite alternate; transition: 0.6s;
        }
        .flame.off { opacity: 0; transform: scale(0); pointer-events: none; }
        
        @keyframes flicker { 0% { transform: scale(1); } 100% { transform: scale(1.1); } }

        .wish-final { margin-top: 60px; opacity: 0; text-align: center; transition: 1s; }
        .wish-final.show { opacity: 1; }

        /* --- 6. SLIDE 5: VIDEO --- */
        .video-section {
            min-height: 100vh; width: 100%; background: #000;
            display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 40px 20px;
        }
        .video-container {
            width: 100%; max-width: 450px; aspect-ratio: 9/16;
            background: #111; border-radius: 20px; overflow: hidden;
            border: 2px solid var(--accent); box-shadow: 0 0 30px rgba(255, 77, 109, 0.2);
        }
        video { width: 100%; height: 100%; object-fit: cover; }

        footer { padding: 40px; text-align: center; color: #333; font-size: 0.7rem; background: #000; }
    </style>
</head>
<body>

    <div id="intro-overlay" onclick="startExperience()">
        <canvas id="canvas-fireworks"></canvas>
        <div id="tap-msg">PENCET LAYAR SAYANG</div>
    </div>

    <audio id="musikUltah" loop>
        <source src="https://www.bensound.com/bensound-music/bensound-love.mp3" type="audio/mpeg">
    </audio>

    <section class="hero" id="hero-content">
        <h1>HAPPY<br>BIRTHDAY</h1>
        <div class="hero-footer">
            <div>FEBRUARI 12, 2026</div>
            <div class="age">18th</div>
        </div>
    </section>

    <section class="scroll-wrapper">
        <div class="grid-container">
            <div class="row row-left">
                <img src="asset/foto1.png"><img src="asset/foto2.png"><img src="asset/foto3.png"><img src="asset/foto4.png"><img src="asset/foto5.png"><img src="asset/foto6.png"><img src="asset/foto7.png"><img src="asset/foto8.png">
                <img src="asset/foto1.png"><img src="asset/foto2.png"><img src="asset/foto3.png"><img src="asset/foto4.png"><img src="asset/foto5.png"><img src="asset/foto6.png"><img src="asset/foto7.png"><img src="asset/foto8.png">
            </div>
            <div class="row row-right">
                <img src="asset/foto7.png"><img src="asset/foto8.png"><img src="asset/foto6.png"><img src="asset/foto5.png"><img src="asset/foto4.png"><img src="asset/foto3.png"><img src="asset/foto2.png"><img src="asset/foto1.png">
                <img src="asset/foto7.png"><img src="asset/foto8.png"><img src="asset/foto6.png"><img src="asset/foto5.png"><img src="asset/foto4.png"><img src="asset/foto3.png"><img src="asset/foto2.png"><img src="asset/foto1.png">
            </div>
            <div class="row row-left">
                <img src="asset/foto2.png"><img src="asset/foto4.png"><img src="asset/foto6.png"><img src="asset/foto1.png"><img src="asset/foto3.png"><img src="asset/foto5.png"><img src="asset/foto7.png"><img src="asset/foto8.png">
                <img src="asset/foto2.png"><img src="asset/foto4.png"><img src="asset/foto6.png"><img src="asset/foto1.png"><img src="asset/foto3.png"><img src="asset/foto5.png"><img src="asset/foto7.png"><img src="asset/foto8.png">
            </div>
        </div>
        <div class="floating-text-slide2">
            <h2 class="anim-scroll">You're my brightest star<br>in the <span>Universe</span></h2>
        </div>
    </section>

    <section class="message-section">
        <div class="text-content">
            <h2>The first 1 on my mind</h2>
            <p>Makasih ya udah nemenin aku selama ini. Aku bener-bener beruntung dapetin kamu. I love you!</p>
        </div>
        <div class="collage-content">
            <img src="asset/foto1.png"><img src="asset/foto2.png">
            <img src="asset/foto3.png"><img src="asset/foto4.png">
        </div>
    </section>

    <section class="cake-section">
        <div class="instruction" id="instruksi">TIUP LILINNYA! üïØÔ∏è<br><small>(Tiup lubang mic HP atau tap apinya)</small></div>
        <div class="cake" id="cake-area">
            <div class="candle"><div class="flame"></div></div>
            <div class="candle"><div class="flame"></div></div>
            <div class="candle"><div class="flame"></div></div>
            <div class="candle"><div class="flame"></div></div>
        </div>
        <div class="wish-final" id="wish">
            <h2 style="color:var(--accent); font-size: 2.5rem;">WISH GRANTED! üéâ</h2>
            <p>Scroll terus...</p>
        </div>
    </section>

    <section class="video-section">
        <h2 style="margin-bottom: 25px; color: var(--accent);">FOR YOU ‚ù§Ô∏è</h2>
        <div class="video-container">
            <video controls playsinline>
                <source src="asset/video.mov" type="video/quicktime">
                <source src="asset/video1.mp4" type="video/mp4">
            </video>
        </div>
        <a href="https://wa.me/628123456789" style="margin-top:40px; color:white; text-decoration:none; border: 1px solid #444; padding: 12px 30px; border-radius: 50px; font-size: 0.8rem;">CHAT AKU SEKARANG</a>
    </section>

    <footer>MADE WITH LOVE &bull; 2026</footer>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        function startExperience() {
            document.getElementById('musikUltah').play();
            document.getElementById('intro-overlay').style.opacity = '0';
            setTimeout(() => { 
                document.getElementById('intro-overlay').style.display = 'none'; 
                document.getElementById('hero-content').style.opacity = '1';
                gsap.to(".hero h1, .hero-footer", { opacity: 1, y: 0, duration: 1.2, stagger: 0.3 });
                initMic(); 
            }, 1000);

            gsap.to(".anim-scroll", { scrollTrigger: { trigger: ".scroll-wrapper", start: "top 50%" }, opacity: 1, y: 0, duration: 1 });
            gsap.to(".text-content", { scrollTrigger: { trigger: ".message-section", start: "top 60%" }, opacity: 1, x: 0, duration: 1 });
            gsap.to(".collage-content", { scrollTrigger: { trigger: ".message-section", start: "top 60%" }, opacity: 1, x: 0, duration: 1 });
        }

        function initMic() {
            navigator.mediaDevices.getUserMedia({ audio: true }).then(stream => {
                const ctx = new AudioContext();
                const analyser = ctx.createAnalyser();
                const src = ctx.createMediaStreamSource(stream);
                const proc = ctx.createScriptProcessor(2048, 1, 1);
                analyser.fftSize = 256;
                src.connect(analyser); analyser.connect(proc); proc.connect(ctx.destination);
                proc.onaudioprocess = () => {
                    const data = new Uint8Array(analyser.frequencyBinCount);
                    analyser.getByteFrequencyData(data);
                    let val = data.reduce((a, b) => a + b) / data.length;
                    
                    // Ambang batas tiupan (40)
                    if (val > 40) matikanLilin(); 
                };
            }).catch(() => { 
                document.getElementById('cake-area').onclick = matikanLilin; 
            });
            document.getElementById('cake-area').onclick = matikanLilin;
        }

        function matikanLilin() {
            const flames = document.querySelectorAll('.flame');
            flames.forEach(f => f.classList.add('off'));
            document.getElementById('wish').classList.add('show');
            document.getElementById('instruksi').innerHTML = "HAPPY BIRTHDAY! ‚ú®";
        }

        // FIREWORKS
        const canvas = document.getElementById('canvas-fireworks');
        const ctx = canvas.getContext('2d');
        let particles = [];
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        function createHeart(centerX, centerY) {
            for (let i = 0; i < 40; i++) {
                const angle = (i / 40) * Math.PI * 2;
                const x = 16 * Math.pow(Math.sin(angle), 3);
                const y = -(13 * Math.cos(angle) - 5 * Math.cos(2 * angle) - 2 * Math.cos(3 * angle) - Math.cos(4 * angle));
                particles.push({ x: centerX, y: centerY, vx: x * 0.2, vy: y * 0.2, alpha: 1 });
            }
        }
        function animate() {
            ctx.fillStyle = 'rgba(0,0,0,0.2)'; ctx.fillRect(0,0,canvas.width,canvas.height);
            particles.forEach((p,i) => {
                p.x+=p.vx; p.y+=p.vy; p.alpha-=0.01;
                ctx.globalAlpha=p.alpha; ctx.fillStyle='#ff4d6d';
                ctx.beginPath(); ctx.arc(p.x,p.y,2,0,Math.PI*2); ctx.fill();
                if(p.alpha<=0) particles.splice(i,1);
            });
            requestAnimationFrame(animate);
        }
        setInterval(() => createHeart(canvas.width/2, canvas.height/2), 2000);
        animate();
    </script>
</body>
</html>
